library(here)
library(tidyverse)
library(tidyverse)
library(plm)
### Change directory here. Keep file structure same as sharepoint structure.
getwd()
knitr::opts_knit$set(root.dir = here::here())
### Change directory here. Keep file structure same as sharepoint structure.
getwd()
library(here)
here::here()
library(here)
getwd()
### Change directory here. Keep file structure same as sharepoint structure.
knitr::opts_knit$set(root.dir = "C:/Users/arthu/Documents/_Arthur/!LKYSPP MIA/3-3 R Module/_Project")
getwd()
### Change directory here. Keep file structure same as sharepoint structure.
knitr::opts_knit$set(root.dir = here::here())
getwd()
library(here)
library(tidyverse)
library(plm)
### Change directory here. Keep file structure same as sharepoint structure.
knitr::opts_knit$set(root.dir = here::here())
### Clean workspace
rm(list=ls())
### Import voter turnout data
### https://election.lab.ufl.edu/dataset/1980-2022-general-election-turnout-rates/
df_turnout <- read_csv("02. Inputs/Turnout_1980_2022_v1.0.csv")
### Change directory here. Keep file structure same as sharepoint structure.
knitr::opts_knit$set(root.dir = here::here())
getwd()
### Import voter turnout data
### https://election.lab.ufl.edu/dataset/1980-2022-general-election-turnout-rates/
df_turnout <- read_csv("02. Inputs/Turnout_1980_2022_v1.0.csv")
### Import voter turnout data
### https://election.lab.ufl.edu/dataset/1980-2022-general-election-turnout-rates/
df_turnout <- read_csv("/02. Inputs/Turnout_1980_2022_v1.0.csv")
here::here()
library(here)
here::here()
library(here)
library(tidyverse)
library(plm)
library(stargazer)
### Change directory here. Keep file structure same as sharepoint structure.
knitr::opts_knit$set(root.dir = here::here())
### Import redistricting data
### https://redistricting.lls.edu/national-overview/?colorby=Plan%20Status&level=Congress&cycle=2020
df_redist <- read_csv("02. Inputs/StatesAndCyclesData_production-20240301a.csv")
View(df_redist)
df_redist %>%
str()
df_redist %>%
rename_all(tolower) %>%
str()
df_redist %>%
rename_all(tolower) %>%
group_by(state, `cycle year`, level) %>%
summarize(n = n())
df_redist %>%
rename_all(tolower) %>%
group_by(state, `cycle year`, level) %>%
summarize(n = n()) %>%
arrange(desc(n))
df_redist %>%
rename_all(tolower) %>%
group_by(state, `cycle year`) %>%
summarize(n = n()) %>%
arrange(desc(n))
df_redist %>%
rename_all(tolower) %>%
group_by(state, `cycle year`) %>%
summarize(`party control`, n = n()) %>%
arrange(desc(n))
df_redist %>%
rename_all(tolower) %>%
group_by(state, `cycle year`) %>%
summarize(n = n()) %>%
arrange(desc(n))
### Import redistricting data
### https://redistricting.lls.edu/national-overview/?colorby=Plan%20Status&level=Congress&cycle=2020
df_redist <- read_csv("02. Inputs/StatesAndCyclesData_production-20240301a.csv")
df_redist %>%
rename_all(tolower) %>%
group_by(state, `cycle year`, level) %>%
summarize(n = n()) %>%
arrange(desc(n))
df_redist %>%
rename_all(tolower) %>%
filter(level == "Congress") %>%
group_by(state, `cycle year`, level) %>%
summarize(n = n()) %>%
arrange(desc(n))
df_redist %>%
rename_all(tolower) %>%
filter(level == "Congress") %>%
group_by(state, `cycle year`, level, `court action`) %>%
summarize(n = n()) %>%
arrange(desc(n))
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4))
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year)
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year) %>%
filter(level == "Congress")
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year) %>%
filter(level == "Congress") %>%
group_by(state, pass_year) %>%
summarize(n = n())
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year) %>%
filter(level == "Congress") %>%
group_by(state, pass_year) %>%
summarize(n = n()) %>%
arrange_by(desc(n))
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year) %>%
filter(level == "Congress") %>%
group_by(state, pass_year) %>%
summarize(n = n()) %>%
arrange(desc(n))
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year) %>%
filter(level == "Congress") %>%
group_by(state) %>%
summarize(n = n()) %>%
arrange(desc(n))
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year) %>%
filter(level == "Congress") %>%
group_by(state) %>%
summarize(n = n(),
min_year = min(pass_year),
max_year = max(pass_year)) %>%
arrange(desc(n))
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year) %>%
filter(level == "Congress") %>%
filter(pass_year <= 2020) %>%
group_by(state) %>%
summarize(n = n(),
min_year = min(pass_year),
max_year = max(pass_year)) %>%
arrange(desc(n))
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year) %>%
filter(level == "Congress") %>%
filter(pass_year <= 2020) %>%
View()
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year) %>%
filter(level == "Congress") %>%
filter(pass_year <= 2020) %>%
select(state, pass_year, level, `party control`, `drawn by`) %>%
View()
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year) %>%
filter(level == "State Lower") %>%
filter(pass_year <= 2020) %>%
select(state, pass_year, level, `party control`, `drawn by`) %>%
View()
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year) %>%
# filter(level == "State Lower") %>%
filter(pass_year <= 2020) %>%
select(state, pass_year, level, `party control`, `drawn by`) %>%
View()
df_redist %>%
rename_all(tolower) %>%
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
drop_na(pass_year) %>%
# filter(level == "State Lower") %>%
filter(pass_year <= 2020) %>%
select(state, pass_year, level, `party control`, `drawn by`) %>%
# View()
group_by(state) %>%
summarize(n = n(),
min_year = min(pass_year),
max_year = max(pass_year)) %>%
arrange(desc(n))
df4_2 <- df4_1 %>%
group_by(state) %>%
summarize(n = n(),
min_year = min(pass_year),
max_year = max(pass_year)) %>%
arrange(desc(n))
df4_1 <- df_redist %>%
# Renaming column names to lowercase (for easier merge)
rename_all(tolower) %>%
# Extracting the year the redistricting plan was passed
mutate(pass_year = substr(passed, start = 1, stop = 4)) %>%
# Dropping entries without such information
drop_na(pass_year) %>%
### ADJUST!!!
# Filters that need to be adjusted
# filter(level == "State Lower") %>%
# filter(pass_year <= 2020) %>%
###
select(state, pass_year, level, `party control`, `drawn by`)
df4_2 <- df4_1 %>%
group_by(state) %>%
summarize(n = n(),
min_year = min(pass_year),
max_year = max(pass_year)) %>%
arrange(desc(n))
View(df4_2)
